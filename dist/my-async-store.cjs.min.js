"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var call=function(e){return e()},removeFrom=function(e){return function(t){for(var r=0;r<e.length;r++)if(e[r]===t)return void e.splice(r,1)}};function createAsyncStore(){var e=new Map,t=[],r=removeFrom(t),a=function(t){return t.map(e.has.bind(e)).every(Boolean)};return{wait:function(){for(var o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];return new Promise((function(n){var s=!1,l=function(){if(a(o)){if(s)throw new Error("Called More Than One Times!");s=!0,r(l),n(e)}};l(),s||t.push(l)}))},storeMap:e,set:function(r,a){return e.set(r,a)&&[].concat(t).forEach(call)},get:function(t){return e.get(t)},del:function(t){return e.delete(t)},has:function(t){return e.has(t)},clear:function(){return e.clear()},size:function(){return e.size}}}var globalStoreMap=new Map;function namespace(e){if(globalStoreMap.has(e))return globalStoreMap.get(e);var t=createAsyncStore();return t.namespace=e,globalStoreMap.set(e,t),t}var defaultStore=namespace(Symbol("my-async-store")),set=defaultStore.set,get=defaultStore.get,wait=defaultStore.wait,del=defaultStore.del,has=defaultStore.has,clear=defaultStore.clear,size=defaultStore.size,storeMap=defaultStore.storeMap;exports.clear=clear,exports.del=del,exports.get=get,exports.has=has,exports.namespace=namespace,exports.set=set,exports.size=size,exports.storeMap=storeMap,exports.wait=wait;
