"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var call=function(e){return e()},removeFrom=function(e){return function(r){for(var t=0;t<e.length;t++)if(e[t]===r)return void e.splice(t,1)}};function createAsyncStore(){var e=new Set,r=[],t=removeFrom(r),a=function(r){return r.map(e.has.bind(e)).every(Boolean)};return{wait:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new Promise((function(n){var o=!1,s=function(){if(a(e)){if(o)throw new Error("Called More Than One Times!");o=!0,t(s),n()}};s(),o||r.push(s)}))},store:e,add:function(t){return e.add(t)&&r.forEach(call)},del:function(r){return e.delete(r)},has:function(r){return e.has(r)},clear:function(){return e.clear()},size:function(){return e.size}}}var storeMap=new Map;function namespace(e){if(storeMap.has(e))return storeMap.get(e);var r=createAsyncStore();return r.namespace=e,storeMap.set(e,r),r}var defaultStore=namespace(Symbol("my-async-store")),add=defaultStore.add,del=defaultStore.del,has=defaultStore.has,wait=defaultStore.wait,clear=defaultStore.clear,size=defaultStore.size,store=defaultStore.store;exports.add=add,exports.clear=clear,exports.del=del,exports.has=has,exports.namespace=namespace,exports.size=size,exports.store=store,exports.wait=wait;
